<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Session 1.1: Bayesian thinking</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <!-- (Re)Defines a bunch of LaTeX commands that can then be used directly in the .Rmd file as '\command{...}' -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      TeX: {
        /* This enables color macros */
        extensions: ["color.js"],
        Macros: {
          /* Probability & mathematical symbols */
          Pr: "{\\style{font-family:inherit; font-size: 110%;}{\\text{Pr}}}",
          exp: "{\\style{font-family:inherit; font-size: 105%;}{\\text{exp}}}",
          log: "{\\style{font-family:inherit; font-size: 105%;}{\\text{log}}}",
          ln: "{\\style{font-family:inherit; font-size: 105%;}{\\text{ln}}}",
          logit: "{\\style{font-family:inherit; font-size: 100%;}{\\text{logit}}}",
          HR: "{\\style{font-family:inherit; font-size: 105%;}{\\text{HR}}}",
          OR: "{\\style{font-family:inherit; font-size: 105%;}{\\text{OR}}}",
          E: "{\\style{font-family:inherit; font-size: 105%;}{\\text{E}}}",
          Var: "{\\style{font-family:inherit; font-size: 105%;}{\\text{Var}}}",
          Cov: "{\\style{font-family:inherit; font-size: 105%;}{\\text{Cov}}}",
          Corr: "{\\style{font-family:inherit; font-size: 105%;}{\\text{Corr}}}",
          DIC: "{\\style{font-family:inherit; font-size: 105%;}{\\text{DIC}}}",
          se: "{\\style{font-family:inherit; font-size: 100%;}{\\text{se}}}",
          sd: "{\\style{font-family:inherit; font-size: 100%;}{\\text{sd}}}",
          kld: "{\\style{font-family:inherit; font-size: 100%;}{\\text{kld}}}",
          /* Distributions */
          dnorm: "{\\style{font-family:inherit;}{\\text{Normal}}}",
          dt: "{\\style{font-family:inherit;}{\\text{t}}}",
          ddirch: "{\\style{font-family:inherit;}{\\text{Dirichlet}}}",
          dmulti: "{\\style{font-family:inherit;}{\\text{Multinomial}}}",
          dbeta: "{\\style{font-family:inherit;}{\\text{Beta}}}",
          dgamma: "{\\style{font-family:inherit;}{\\text{Gamma}}}",
          dbern: "{\\style{font-family:inherit;}{\\text{Bernoulli}}}",
          dbin: "{\\style{font-family:inherit;}{\\text{Binomial}}}",
          dpois: "{\\style{font-family:inherit;}{\\text{Poisson}}}",
          dweib: "{\\style{font-family:inherit;}{\\text{Weibull}}}",
          dexp: "{\\style{font-family:inherit;}{\\text{Exponential}}}",
          dlnorm: "{\\style{font-family:inherit;}{\\text{logNormal}}}",
          dunif: "{\\style{font-family:inherit;}{\\text{Uniform}}}",
          /* LaTeX formatting */
          bm: ["{\\boldsymbol #1}",1],
          /* These create macros to typeset numbers in maths with the basic font */
          0: "{\\style{font-family:inherit; font-size: 105%;}{\\text{0}}}",
          1: "{\\style{font-family:inherit; font-size: 105%;}{\\text{1}}}",
          2: "{\\style{font-family:inherit; font-size: 105%;}{\\text{2}}}",
          3: "{\\style{font-family:inherit; font-size: 105%;}{\\text{3}}}",
          4: "{\\style{font-family:inherit; font-size: 105%;}{\\text{4}}}",
          5: "{\\style{font-family:inherit; font-size: 105%;}{\\text{5}}}",
          6: "{\\style{font-family:inherit; font-size: 105%;}{\\text{6}}}",
          7: "{\\style{font-family:inherit; font-size: 105%;}{\\text{7}}}",
          8: "{\\style{font-family:inherit; font-size: 105%;}{\\text{8}}}",
          9: "{\\style{font-family:inherit; font-size: 105%;}{\\text{9}}}",
          /* Health economics quantities */
          icer: "{\\style{font-family:inherit; font-size: 100%;}{\\text{ICER}}}",
          nb: "{\\style{font-family:inherit; font-size: 100%;}{\\text{NB}}}",
          ol: "{\\style{font-family:inherit; font-size: 100%;}{\\text{OL}}}",
          ceac: "{\\style{font-family:inherit; font-size: 100%;}{\\text{CEAC}}}",
          evpi: "{\\style{font-family:inherit; font-size: 100%;}{\\text{EVPI}}}",
          evppi: "{\\style{font-family:inherit; font-size: 100%;}{\\text{EVPPI}}}",
          evsi: "{\\style{font-family:inherit; font-size: 100%;}{\\text{EVSI}}}"
        }
      }
    });
    </script>
    <link rel="stylesheet" href="../assets/beamer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




class: title-slide

# Session 1.1: Bayesian thinking&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt; 

## 

###     

### Bayesian modelling for Spatial and Spatio-temporal data, Imperial College 

&lt;!-- Can also separate the various components of the extra argument 'params', eg as in 
### Bayesian modelling for Spatial and Spatio-temporal data, Imperial College, , MSc in Epidemiology
--&gt;



---

layout: true  

.my-footer[ 
.alignleft[ 
&amp;nbsp; &amp;copy; Marta Blangiardo | Monica Pirani 
]
.aligncenter[
MSc in Epidemiology 
]
.alignright[
Bayesian modelling for Spatial and Spatio-temporal data, NA 
]
] 


&lt;style&gt;
pre {
  overflow-x: auto;
}
pre code {
  word-wrap: normal;
  white-space: pre;
}
&lt;/style&gt;


---

# Learning objectives

After this lecture you should be able to 
&lt;span style="display:block; margin-top: 40px ;"&gt;&lt;/span&gt;
- Introduce Bayesian way of thinking     
&lt;span style="display:block; margin-top: 40px ;"&gt;&lt;/span&gt;
- Compare Bayesian and Frequentist approaches in terms of parameters and probability definition

The topics treated in this lecture are presented in Chapter 3  of Blangiardo and Cameletti (2015) and in Chapter 1 of  Johnson, Ott, and Dogucu (2022).

---

# Main resources

For the first part of this module you will be able to follow these two books  

&lt;span style="display:block; margin-top: -30px ;"&gt;&lt;/span&gt;
&lt;iframe src="https://www.bayesrulesbook.com/index.html" width="140%" height="90%" data-external="1" style="transform: scale(.7);border:none"&gt;&lt;/iframe&gt;

---

# Main resources


&lt;center&gt;&lt;img src=./img/INLA.png width='80%' title='INCLUDE TEXT HERE'&gt;&lt;/center&gt;

[Spatial and Spatio-temporal Bayesian models with R-INLA](https://sites.google.com/a/r-inla.org/stbook/home)

---

# Outline 

&lt;span style="display:block; margin-top: 30px ;"&gt;&lt;/span&gt;

1\. [Why Bayesian](#WhyBayesian)

&lt;span style="display:block; margin-top: 30px ;"&gt;&lt;/span&gt;

2\. [Bayesian vs Frequentist](#BayesFreq)

&lt;span style="display:block; margin-top: 30px ;"&gt;&lt;/span&gt;

3\. [Components of a Bayesian analysis](#Components)


---

name: WhyBayesian
  
&lt;span style="display:block; margin-top: 250px ;"&gt;&lt;/span&gt;

.myblue[.center[.huge[
**Why Bayesian**]]]

---

# Statistics - The  'Big Picture'

&lt;center&gt;&lt;img src=./img/BigPicture0.png width='60%' title=''&gt;&lt;/center&gt;

---

# Statistics - The  'Big Picture'


&lt;center&gt;&lt;img src=./img/BigPicture.png width='60%' title=''&gt;&lt;/center&gt;

--

&lt;span style="display:block; margin-top: -50px ;"&gt;&lt;/span&gt;

- Several different ways of formulating statistical models and computing inferences from these models and data
- Can be grouped into two broad approaches:
  - Frequentist
  - Bayesian
---

# Everyday thought process

.pull-left[
- There’s a new Italian restaurant in your neighborhood and on google reviews you see that it has 5 star (and of course you love Italian food). 

- Thus, before going to the restaurant you believe that the food is going to be delicious. 

- At your visit your pasta arrives in a soggy mess.

- So you update your belief and now conclude the restaurant is 3 stars rather than 5. 

- You decide to try again and this time your aubergine parmigiana turns out to be exquisite.

- So you update your belief and now conclude the restaurant is 4 stars rather than 3. 

]

.pull-right[
&lt;center&gt;&lt;img src=./img/Restaurant.png width='200%' title='INCLUDE TEXT HERE'&gt;&lt;/center&gt;
]

--

.red[Natural Bayesian knowledge-building process of acknowledging your preconceptions, using data to update your knowledge, and repeating.]
---

# Thought process of a physician

- A patient presents with a set of symptoms, concerned that they might have a certain disease

&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;

- The physician assesses the chance that the patient has this disease, based on

  - symptoms
  - family history
  - alternative explanations of symptoms
  - prevalence of disease

&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;

- The physician sends the patient for a diagnostic test
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- The physician re-assesses the chance that the patient has this disease, taking account of

  - results of diagnostic test
  - reliability of diagnostic test
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- The physician may send the patient for further diagnostic tests

**In pair: jot down the doodle for the physician knowledge-building process**

---

# Bayesian thinking

&lt;center&gt;&lt;img src=./img/KnowledgeBuilding.png width='80%' title=''&gt;&lt;/center&gt;


- This is the foundation of Bayesian statistics
- It can be applied to any research area
---

# Why Bayesian methods?

- Bayesian methods have been widely applied in many areas:
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
  - medicine / epidemiology
  - genetics
  - ecology
  - environmental sciences
  - social and political sciences
  - finance
  - archaeology
  - .....
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- Motivations for adopting Bayesian approach vary:
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
  - natural and coherent way of thinking about science and learning
  - pragmatic choice that is suitable for the problem in hand

---

name: BayesFreq
  
&lt;span style="display:block; margin-top: 250px ;"&gt;&lt;/span&gt;

.myblue[.center[.huge[
**Bayesian vs Frequentist**]]]

---
# Quiz time: are you a Frequentist or a Bayesian
&lt;small&gt;
.content-box-blue[1\. When flipping a fair coin, we say that *the probability of flipping Heads is 0.5.* How do you interpret this probability?

  a. If I flip this coin over and over, roughly 50% will be Heads.
  
  b. Heads and Tails are equally plausible.
  
  c. Both a and b make sense.]

--

.content-box-green[2\. An election is coming up and a pollster claims that candidate A has a 0.9 probability of winning. How do you interpret this probability?

  a. If we observe the election over and over, candidate A will win roughly 90% of the time.
  
  b. Candidate A is much more likely to win than to lose.
  
  c. The pollster’s calculation is wrong. Candidate A will either win or lose, thus their probability of winning can only be 0 or 1.
]
--

.content-box-yellow[3\. Consider two claims. (1) Zuofu claims that he can predict the outcome of a coin flip. To test his claim, you flip a fair coin 10 times and he correctly predicts all 10. (2) Kavya claims that she can distinguish natural and artificial sweeteners. To test her claim, you give her 10 sweetener samples and she correctly identifies each. In light of these experiments, what do you conclude?

  a. You’re more confident in Kavya’s claim than Zuofu’s claim.
  
  b. The evidence supporting Zuofu’s claim is just as strong as the evidence supporting Kavya’s claim.
]
--

.content-box-orange[4\. Suppose that during a recent doctor’s visit, you tested positive for a very rare disease. If you only get to ask the doctor one question, which would it be?

  a. What’s the chance that I actually have the disease?
  
  b. If in fact I don’t have the disease, what’s the chance that I would’ve gotten this positive test result?
]
&lt;/small&gt;

---

# Question 1


- There is a crucial difference in how Frequentist and Bayesian interpret probability. 

.content-box-green[In the Bayesian philosophy, a probability measures **the relative plausibility** of an event.

The frequentist philosophy is so named for its interpretation of probability as the **long-run relative frequency** of a **repeatable** event.]

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

So for question 1

- a Bayesian would conclude that Heads and Tails are equally likely

&lt;span style="display:block; margin-top: 50px ;"&gt;&lt;/span&gt;

- a Frequentist would conclude that if we flip the coin over and over and over, roughly 1/2 of these flips will be Heads

---

# Question 2

- Since the election is a one-time event, the long-run relative frequency concept of observing the election over and over does not work
&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;
- In a very strict sense a Frequentist might say that the pollster is wrong. Since the candidate will either win or lose, their win probability must be either 1 or 0. 
&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;
- A less extreme Frequentist interpretation, though a bit awkward, is more reasonable: in long-run hypothetical repetitions of the election, i.e., elections with similar circumstances, candidate A would win roughly 90% of the time.
&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;
- A Bayesian would not be bound by the concept of long-run relative frequency and would simply acknowledge that the candidate A has a higher probability of winning the election. 

---

# Question 3

- There is a crucial difference in how Frequentist and Bayesian consider information. 

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

.content-box-green[In the Bayesian philosophy, we have two sources of information: the **prior** and the **data**; they are combined into the **posterior**.

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

The Frequentist philosophy based all the inference on data alone.]

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

- Zuofu and Kavya's claims are equally likely in the Frequentist approach, despite Zuofu's being quite ridicolous

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

- A Bayesian analysis gives voice to our prior knowledge. 
  - Here, our experience on Earth suggests that Zuofu is probably overstating his abilities but that Kavya’s claim is reasonable. 
  - Since the data is consistent with our prior, we’re even more certain that Kavya is a sweetener savant. However, given its inconsistency with our prior experience, we are chalking Zuofu’s psychic achievement up to simple luck.


---

# Question 4

- Though the answers to both questions would be helpful, having to choose I would go for answer to (a)

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

- Interestignly, only a Bayesian analysis would be able to answer (a), as it **assesses the uncertainty of the hypothesis in light of the observed data**.

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

- A Frequentist analysis **assesses the uncertainty of the observed data in light of an assumed hypothesis**.


.content-box-green[
A Bayesian hypothesis test seeks to answer: In light of the observed data, what’s the chance that the hypothesis is correct?

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

A frequentist hypothesis test seeks to answer: If in fact the hypothesis is incorrect, what’s the chance I’d have observed this, or even more extreme, data?
]

**For an other example of an analysis done using the Bayesian and the Frequentist approach see recording 1**

---


name: Components
  
&lt;span style="display:block; margin-top: 250px ;"&gt;&lt;/span&gt;

.myblue[.center[.huge[
**Components of a Bayesian analysis**]]]

---

# A Bayesian analysis

A clinical trial is carried out to collect evidence about an unknown *treatment effect*

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

.red[Conventional analysis]

- p-value for `\(H_0\)`: treatment effect is zero
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;

- Point estimate and CI as summaries of  size of treatment effect

**Aim is to learn what this trial tells us about the treatment effect**

--

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;

.red[Bayesian analysis]

- Inference is based on probability statements summarising the posterior distribution of the treatment effect

Asks: **how should this trial change our opinion about the treatment effect?**

---

# Components of a Bayesian analysis

A clinical trial is carried out to collect evidence about an
unknown *treatment effect*. The Bayesian analyst needs to explicitly state
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;

- a reasonable opinion concerning the plausibility of different values of the treatment effect *excluding* the evidence from the trial (the .red[prior distribution])
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;

- the support for different values of the treatment effect based *solely* on data from the
   trial (the .red[likelihood]),

&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;

and to combine these two sources to produce

- a final opinion about the treatment effect (the .red[posterior distribution])

--

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;


The final combination is done using **Bayes theorem** (and only simple rules of probability), which essentially weights the likelihood from the trial with the relative plausibilities defined by the prior distribution

&lt;span style="display:block; margin-top: 20px ;"&gt;&lt;/span&gt;


.content-box-green[
One can view the Bayesian approach as a formalisation of the process
of learning from experience]

---

# Bayesian inference: the posterior distribution

Posterior distribution forms basis for all inference --- can
be summarised to provide
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- point and interval estimates of Quantities of Interest (QOI), e.g. treatment effect, small area estimates, ...
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- point and interval estimates of any function of the parameters
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- probability that QOI (e.g. treatment effect) exceeds a critical threshold
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- prediction of QOI in a new unit
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- prior information for future experiments, trials, surveys, ...
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- inputs for decision making
&lt;span style="display:block; margin-top: 10px ;"&gt;&lt;/span&gt;
- ...

---

# References

Blangiardo, M. et al. (2015). _Spatial and spatio-temporal Bayesian models with R-INLA_. John Wiley &amp;
Sons.

Johnson, A. A. et al. (2022). _Bayes Rules!: An Introduction to Applied Bayesian Modeling_. CRC Press.



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"navigation": {
"scroll": false
},
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
.logo {
  background-image: url("assets/MRC-Centre-Logo.png");
  background-size: 15% 10%;
  background-repeat: no-repeat;
  position: absolute;
  top:  0.25%; /* 1.135em */
  left: 85%;
  width: 100%;
  height: 100%;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)' +
    ':not(.thankyou-michelle)' +
    ':not(.thankyou-barney)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>


<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
